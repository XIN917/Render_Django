@startuml models_serializers_views_uml
' Django Models UML Diagram con Serializers y Views

' Models

class User {
    +email: str
    +full_name: str
    +role: str
    +password: str
    +is_staff: bool
    +is_superuser: bool
    +__str__(): str
    +set_password(password: str): void
}

class TeacherApplication {
    +attachment?: File
    +status: str
    +created_at: datetime
    +updated_at: datetime
    +clean(): void
    +approve(): void
    +reject(): void
    +__str__(): str
}

class Profile {
    +bio?: str
    +photo?: File
    +__str__(): str
}

class TFM {
    +title: str
    +description: str
    +file: File
    +attachment?: File
    +created_at: datetime
    +status: str
    +__str__(): str
}

class TFMReview {
    +reviewed_at: datetime
    +action: str
    +comment: str
    +__str__(): str
}

class Slot {
    +date: date
    +start_time: time
    +end_time: time
    +max_tfms: int
    +room: str
    +pre_duration?: timedelta
    +is_full(): bool
    +get_tfms(): list[TFM]
    +clean(): void
    +__str__(): str
}

class Track {
    +title: str
    +__str__(): str
}

class Tribunal {
    +index: int
    +__str__(): str
    +save(): void
    +add_committee(user: User, role: str): Committee
    +get_semester(): Semester
    +is_ready(): bool
    +is_full(): bool
}

class Committee {
    +role: str
    +__str__(): str
}

class Semester {
    +name: str
    +start_date: date
    +end_date: date
    +int_presentation_date: date
    +last_presentation_date: date
    +daily_start_time: time
    +daily_end_time: time
    +pre_duration: timedelta
    +min_committees: int
    +max_committees: int
    +clean(): void
    +__str__(): str
}

class Institution {
    +name: str
    +city: str
    +__str__(): str
}

' Serializers
class UserSerializer
class ProfileSerializer
class TeacherApplicationSerializer
class TFMSerializer
class TFMReviewSerializer
class SlotSerializer
class TrackSerializer
class TribunalSerializer
class CommitteeSerializer
class SemesterSerializer
class InstitutionSerializer

' Views
class UserViewSet
class ProfileViewSet
class TeacherApplicationViewSet
class TFMViewSet
class TFMReviewViewSet
class SlotViewSet
class TrackViewSet
class TribunalViewSet
class CommitteeViewSet
class SemesterViewSet
class InstitutionViewSet

' Serializers to Models
UserSerializer --> User
ProfileSerializer --> Profile
TeacherApplicationSerializer --> TeacherApplication
TFMSerializer --> TFM
TFMReviewSerializer --> TFMReview
SlotSerializer --> Slot
TrackSerializer --> Track
TribunalSerializer --> Tribunal
CommitteeSerializer --> Committee
SemesterSerializer --> Semester
InstitutionSerializer --> Institution

' Views to Serializers
UserViewSet --> UserSerializer
ProfileViewSet --> ProfileSerializer
TeacherApplicationViewSet --> TeacherApplicationSerializer
TFMViewSet --> TFMSerializer
TFMReviewViewSet --> TFMReviewSerializer
SlotViewSet --> SlotSerializer
TrackViewSet --> TrackSerializer
TribunalViewSet --> TribunalSerializer
CommitteeViewSet --> CommitteeSerializer
SemesterViewSet --> SemesterSerializer
InstitutionViewSet --> InstitutionSerializer

' Relationships
User "1" -- "0..*" TeacherApplication : submits >
note on link
only students
end note
User "1" -- "1" Profile : has profile >
User "1" -- "*" TFM : submits >
User "*" -- "*" TFM : directs >
User "1" -- "*" TFMReview : reviews >
note on link
only directors or admin
end note
User "1" -- "*" Committee : attends as >
note on link
only teachers
end note
User "*" -- "1" Institution : is assigned to >
note on link
only professors
end note

TeacherApplication "*" -- "1" Institution : assigned to >
TeacherApplication "*" -- "1" User : submitted by >
Profile "*" -- "1" Institution : belongs to >
Profile "1" -- "1" User : belongs to >
TFM "1" -- "0..1" TFMReview : is reviewed by >
TFM "*" -- "1" User : authored by >
TFM "*" -- "*" User : directed by >
TFMReview "*" -- "1" User : reviewed by >
Slot "*" -- "1" Track : part of >
Slot "1" -- "*" Tribunal : includes >
Track "*" -- "1" Semester : belongs to >
Tribunal "1" -- "1" TFM : evaluates >
Tribunal "*" -- "1" Slot : is assigned to >
Tribunal "*" -- "*" Committee : consists of >
Committee "*" -- "1" Tribunal : part of >
Committee "*" -- "1" User : assigned to >

@enduml
